{"version":3,"file":"patron-web-api.min.mjs","sources":["../src/history-api/HistoryPoppedPage.ts","../src/history-api/HistoryNewPage.ts"],"sourcesContent":["import { SourceType } from \"patron-oop\";\nimport { HistoryPageDocument } from \"src/history-api/HistoryPageDocument\";\n\nexport class HistoryPoppedPage {\n  public constructor(private pageSource: SourceType<HistoryPageDocument>) {}\n\n  public watchPop() {\n    window.addEventListener(\"popstate\", (event) => {\n      const { state } = event;\n\n      if (state.url) {\n        this.pageSource.receive({\n          url: state.url,\n          title: \"\",\n          data: event.state,\n        });\n      }\n    });\n  }\n}\n","import { HistoryPageDocument } from \"src/history-api/HistoryPageDocument\";\n\nexport class HistoryNewPage {\n  public receive(value: HistoryPageDocument) {\n    const correctUrl = location.href.replace(location.origin, \"\");\n\n    if (value.url === correctUrl) {\n      return this;\n    }\n\n    history.pushState(\n      Object.assign({}, value.data ?? {}, {\n        ...value,\n        date: Date.now(),\n      }),\n      value.title,\n      value.url,\n    );\n    return this;\n  }\n}\n"],"names":["HistoryPoppedPage","constructor","pageSource","this","watchPop","window","addEventListener","event","state","url","receive","title","data","HistoryNewPage","value","correctUrl","location","href","replace","origin","history","pushState","Object","assign","date","Date","now"],"mappings":"AAGO,MAAMA,EACJ,WAAAC,CAAoBC,GAAAC,KAAAD,WAAAA,CAA8C,CAElE,QAAAE,GACEC,OAAAC,iBAAiB,YAAaC,IAC7B,MAAAC,MAAEA,GAAUD,EAEdC,EAAMC,KACRN,KAAKD,WAAWQ,QAAQ,CACtBD,IAAKD,EAAMC,IACXE,MAAO,GACPC,KAAML,EAAMC,OAEhB,GAEJ,EChBK,MAAMK,EACJ,OAAAH,CAAQI,GACb,MAAMC,EAAaC,SAASC,KAAKC,QAAQF,SAASG,OAAQ,IAEtD,OAAAL,EAAML,MAAQM,GAIVK,QAAAC,UACNC,OAAOC,OAAO,CAAA,EAAIT,EAAMF,MAAQ,CAAA,EAAI,IAC/BE,EACHU,KAAMC,KAAKC,QAEbZ,EAAMH,MACNG,EAAML,KATCN,IAYX"}