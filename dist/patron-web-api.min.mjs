import{give as r,SourceWithPool as e,Guest as t}from"patron-oop";class o{constructor(r){this.pageSource=r}watchPop(){window.addEventListener("popstate",(e=>{const{state:t}=e;t?.url&&r(t.url,this.pageSource)}))}}class s{give(r){return r===location.href.replace(location.origin,"")||history.pushState({url:r,date:Date.now()},"Loading...",r),this}}var a=Object.defineProperty,n=(r,e,t)=>((r,e,t)=>e in r?a(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t)(r,e+"",t);class i{constructor(r){this.errors=r,n(this,"source",new e)}do(){return new t((r=>{fetch(r.url,r).then((e=>e.ok?r.asJson?e.json():e.text():Promise.reject(new Error("Error of status "+e.status)))).then((r=>{this.source.give(r)})).catch((r=>{this.errors.give(r)}))}))}result(){return this.source}}export{i as Fetched,s as HistoryNewPage,o as HistoryPoppedPage};
//# sourceMappingURL=patron-web-api.min.mjs.map
