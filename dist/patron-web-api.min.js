!function(e,t){"use strict";var r=Object.defineProperty,o=(e,t,o)=>((e,t,o)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o)(e,t+"",o);e.Fetched=class{constructor(e){this.errors=e,o(this,"source",new t.SourceWithPool)}do(){return new t.Guest((e=>{fetch(e.url,e).then((t=>t.ok?e.asJson?t.json():t.text():Promise.reject(new Error("Error of status "+t.status)))).then((e=>{this.source.give(e)})).catch((e=>{this.errors.give(e)}))}))}result(){return this.source}},e.HistoryNewPage=class{give(e){return e===location.href.replace(location.origin,"")||history.pushState({url:e,date:Date.now()},"Loading...",e),this}},e.HistoryPoppedPage=class{constructor(e){this.pageSource=e}watchPop(){window.addEventListener("popstate",(e=>{const{state:r}=e;r?.url&&t.give(r.url,this.pageSource)}))}}}({},patronOop);
