{"version":3,"file":"patron-web-api.mjs","sources":["../src/history-api/HistoryCurrentPage.ts","../src/history-api/HistoryNewPage.ts"],"sourcesContent":["import { HistoryPageDocument } from \"src/history-api/HistoryPageDocument\";\nimport { GuestType, SourceType } from \"patron-oop\";\n\nexport class HistoryCurrentPage {\n  public constructor(private pageSource: SourceType<HistoryPageDocument>) {}\n\n  public page(\n      guest: GuestType<HistoryPageDocument>\n  ) {\n    this.pageSource.receiving(guest);\n    window.addEventListener(\"popstate\", (event) => {\n      const { state } = event;\n      if (state.url) {\n        this.pageSource.receive({\n          url: state.url,\n          title: \"\",\n          data: event.state,\n        });\n      }\n    });\n    return this;\n  }\n}\n","import {SourceType} from \"patron-oop\";\nimport {HistoryPageDocument} from \"src/history-api/HistoryPageDocument\";\n\nexport class HistoryNewPage {\n  public constructor(\n      private pageSource: SourceType<HistoryPageDocument>,\n  ) {}\n\n  public receive(\n      value: HistoryPageDocument\n  ) {\n    history.pushState(value.data ?? {}, value.title, value.url);\n    this.pageSource.receive(value);\n    return this;\n  }\n}\n"],"names":[],"mappings":"AAGO,MAAM,kBAAmB,CAAA;AAAA,EACvB,YAAoB,UAA6C,EAAA;AAA7C,IAAA,IAAA,CAAA,UAAA,GAAA,UAAA,CAAA;AAAA,GAA8C;AAAA,EAElE,KACH,KACF,EAAA;AACA,IAAK,IAAA,CAAA,UAAA,CAAW,UAAU,KAAK,CAAA,CAAA;AAC/B,IAAO,MAAA,CAAA,gBAAA,CAAiB,UAAY,EAAA,CAAC,KAAU,KAAA;AAC7C,MAAM,MAAA,EAAE,OAAU,GAAA,KAAA,CAAA;AAClB,MAAA,IAAI,MAAM,GAAK,EAAA;AACb,QAAA,IAAA,CAAK,WAAW,OAAQ,CAAA;AAAA,UACtB,KAAK,KAAM,CAAA,GAAA;AAAA,UACX,KAAO,EAAA,EAAA;AAAA,UACP,MAAM,KAAM,CAAA,KAAA;AAAA,SACb,CAAA,CAAA;AAAA,OACH;AAAA,KACD,CAAA,CAAA;AACD,IAAO,OAAA,IAAA,CAAA;AAAA,GACT;AACF;;ACnBO,MAAM,cAAe,CAAA;AAAA,EACnB,YACK,UACV,EAAA;AADU,IAAA,IAAA,CAAA,UAAA,GAAA,UAAA,CAAA;AAAA,GACT;AAAA,EAEI,QACH,KACF,EAAA;AACA,IAAQ,OAAA,CAAA,SAAA,CAAU,MAAM,IAAQ,IAAA,IAAI,KAAM,CAAA,KAAA,EAAO,MAAM,GAAG,CAAA,CAAA;AAC1D,IAAK,IAAA,CAAA,UAAA,CAAW,QAAQ,KAAK,CAAA,CAAA;AAC7B,IAAO,OAAA,IAAA,CAAA;AAAA,GACT;AACF;;;;"}