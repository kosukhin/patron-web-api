{"version":3,"file":"patron-web-api.mjs","sources":["../src/history-api/HistoryPoppedPage.ts","../src/history-api/HistoryNewPage.ts"],"sourcesContent":["import { SourceType } from \"patron-oop\";\nimport { HistoryPageDocument } from \"src/history-api/HistoryPageDocument\";\n\nexport class HistoryPoppedPage {\n  public constructor(private pageSource: SourceType<HistoryPageDocument>) {}\n\n  public watchPop() {\n    window.addEventListener(\"popstate\", (event) => {\n      const { state } = event;\n      if (state.url) {\n        this.pageSource.give({\n          url: state.url,\n          title: \"\",\n          data: event.state,\n        });\n      }\n    });\n  }\n}\n","import { GuestObjectType } from \"patron-oop\";\nimport { HistoryPageDocument } from \"src/history-api/HistoryPageDocument\";\n\nexport class HistoryNewPage implements GuestObjectType<HistoryPageDocument> {\n  public give(value: HistoryPageDocument) {\n    const correctUrl = location.href.replace(location.origin, \"\");\n    if (value.url === correctUrl) {\n      return this;\n    }\n    history.pushState(\n      Object.assign({}, value.data ?? {}, {\n        ...value,\n        date: Date.now(),\n      }),\n      value.title,\n      value.url,\n    );\n    return this;\n  }\n}\n"],"names":[],"mappings":"AAGO,MAAM,iBAAkB,CAAA;AAAA,EACtB,YAAoB,UAA6C,EAAA;AAA7C,IAAA,IAAA,CAAA,UAAA,GAAA,UAAA,CAAA;AAAA,GAA8C;AAAA,EAElE,QAAW,GAAA;AAChB,IAAO,MAAA,CAAA,gBAAA,CAAiB,UAAY,EAAA,CAAC,KAAU,KAAA;AAC7C,MAAM,MAAA,EAAE,OAAU,GAAA,KAAA,CAAA;AAClB,MAAA,IAAI,MAAM,GAAK,EAAA;AACb,QAAA,IAAA,CAAK,WAAW,IAAK,CAAA;AAAA,UACnB,KAAK,KAAM,CAAA,GAAA;AAAA,UACX,KAAO,EAAA,EAAA;AAAA,UACP,MAAM,KAAM,CAAA,KAAA;AAAA,SACb,CAAA,CAAA;AAAA,OACH;AAAA,KACD,CAAA,CAAA;AAAA,GACH;AACF;;ACfO,MAAM,cAA+D,CAAA;AAAA,EACnE,KAAK,KAA4B,EAAA;AACtC,IAAA,MAAM,aAAa,QAAS,CAAA,IAAA,CAAK,OAAQ,CAAA,QAAA,CAAS,QAAQ,EAAE,CAAA,CAAA;AAC5D,IAAI,IAAA,KAAA,CAAM,QAAQ,UAAY,EAAA;AAC5B,MAAO,OAAA,IAAA,CAAA;AAAA,KACT;AACA,IAAQ,OAAA,CAAA,SAAA;AAAA,MACN,OAAO,MAAO,CAAA,IAAI,KAAM,CAAA,IAAA,IAAQ,EAAI,EAAA;AAAA,QAClC,GAAG,KAAA;AAAA,QACH,IAAA,EAAM,KAAK,GAAI,EAAA;AAAA,OAChB,CAAA;AAAA,MACD,KAAM,CAAA,KAAA;AAAA,MACN,KAAM,CAAA,GAAA;AAAA,KACR,CAAA;AACA,IAAO,OAAA,IAAA,CAAA;AAAA,GACT;AACF;;;;"}